<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
~ Copyright (c) 2019, Entgra (pvt) Ltd. (http://entgra.io) All Rights Reserved.
~
~ Entgra (pvt) Ltd. licenses this file to you under the Apache License,
~ Version 2.0 (the "License"); you may not use this file except
~ in compliance with the License.
~ You may obtain a copy of the License at
~
~    http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing,
~ software distributed under the License is distributed on an
~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
~ KIND, either express or implied.  See the License for the
~ specific language governing permissions and limitations
~ under the License.
-->
<ApplicationManagementConfiguration>

    <!-- Application Mgt DB schema -->
    <DatasourceName>jdbc/APPM_DS</DatasourceName>

    <Extensions>
        <Extension name="ApplicationManager">
            <ClassName>org.wso2.carbon.device.application.mgt.core.impl.ApplicationManagerImpl</ClassName>
        </Extension>
        <Extension name="ReviewManager">
            <ClassName>org.wso2.carbon.device.application.mgt.core.impl.ReviewManagerImpl</ClassName>
        </Extension>
        <Extension name="LifecycleStateManager">
            <ClassName>org.wso2.carbon.device.application.mgt.core.lifecycle.LifecycleStateManager</ClassName>
        </Extension>
        <Extension name="SubscriptionManager">
            <ClassName>org.wso2.carbon.device.application.mgt.core.impl.SubscriptionManagerImpl</ClassName>
        </Extension>
        <Extension name="ApplicationStorageManager">
            <ClassName>org.wso2.carbon.device.application.mgt.core.impl.ApplicationStorageManagerImpl</ClassName>
            <Parameters>
                <Parameter name="StoragePath">repository/resources/apps/</Parameter>
                <Parameter name="MaxScreenShotCount">6</Parameter>
            </Parameters>
        </Extension>
    </Extensions>

    <!-- This is for publisher lifecycle -->
    <!-- The current lifecycle as follows
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        [Created] -> [In-Review] -> [Approved] -> [Published] -> [Unpublished] -> [Removed]
                        ^                               |                               ^
                        |                               |                               |
                        |                               |-> [Deprecated] - - - - - - - -|
                        |                                                               |
                        |-> [Rejected]  - - - - - - - - - - - - - - - - - - - - - - - - |
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    If there is a requirement to introduce a new state to the lifecycle, please refer above
    diagram and add relevant state to the below configuration appropriately.
    -->

    <!-- a lifecyclestate can have following properties
        <LifecycleState name="In-Review">
            <IsAppInstallable>false</IsAppInstallable>
            <IsAppUpdatable>true</IsAppUpdatable>
            <IsInitialState>false</IsInitialState>
            <IsEndState>false</IsEndState>
            <Permission>
                /device-mgt/applications/life-cycle/in-review
            </Permission>
            <ProceedingStates>
                <State>Rejected</State>
                <State>Approved</State>
            </ProceedingStates>
        </LifecycleState>
    -->
    <LifecycleStates>
        <LifecycleState name="Created">
            <IsAppUpdatable>true</IsAppUpdatable>
            <IsInitialState>true</IsInitialState>
            <IsDeletableState>true</IsDeletableState>
            <Permission>/app-mgt/life-cycle/application/create</Permission>
            <ProceedingStates>
                <State>In-Review</State>
            </ProceedingStates>
        </LifecycleState>
        <LifecycleState name="In-Review">
            <Permission>/app-mgt/life-cycle/application/review</Permission>
            <ProceedingStates>
                <State>Rejected</State>
                <State>Approved</State>
                <State>Created</State>
            </ProceedingStates>
        </LifecycleState>
        <LifecycleState name="Approved">
            <Permission>/app-mgt/life-cycle/application/approve</Permission>
            <ProceedingStates>
                <State>In-Review</State>
                <State>Published</State>
            </ProceedingStates>
        </LifecycleState>
        <LifecycleState name="Rejected">
            <IsDeletableState>true</IsDeletableState>
            <Permission>/app-mgt/life-cycle/application/reject</Permission>
            <ProceedingStates>
                <State>In-Review</State>
            </ProceedingStates>
        </LifecycleState>
        <LifecycleState name="Published">
            <IsAppInstallable>true</IsAppInstallable>
            <Permission>/app-mgt/life-cycle/application/publish</Permission>
            <ProceedingStates>
                <State>Blocked</State>
                <State>Deprecated</State>
            </ProceedingStates>
        </LifecycleState>
        <LifecycleState name="Blocked">
            <Permission>/app-mgt/life-cycle/application/block</Permission>
            <ProceedingStates>
                <State>Published</State>
                <State>Deprecated</State>
            </ProceedingStates>
        </LifecycleState>
        <LifecycleState name="Deprecated">
            <Permission>/app-mgt/life-cycle/application/deprecate</Permission>
            <ProceedingStates>
                <State>Published</State>
                <State>Retired</State>
            </ProceedingStates>
        </LifecycleState>
        <LifecycleState name="Retired">
            <IsEndState>true</IsEndState>
            <Permission>/app-mgt/life-cycle/application/retire</Permission>
        </LifecycleState>
    </LifecycleStates>

    <UIConfigs>
        <EnableOAuth>true</EnableOAuth>
        <EnableSSO>false</EnableSSO>
        <AppRegistration>
            <Tags>
                <Tag>application_management</Tag>
                <Tag>device_management</Tag>
                <Tag>subscription_management</Tag>
                <Tag>review_management</Tag>
            </Tags>
            <AllowToAllDomains>true</AllowToAllDomains>
        </AppRegistration>
        <Scopes>
            <Scope>perm:app:review:view</Scope>
            <Scope>perm:app:review:update</Scope>
            <Scope>perm:app:publisher:view</Scope>
            <Scope>perm:app:publisher:update</Scope>
            <Scope>perm:app:store:view</Scope>
            <Scope>perm:app:subscription:install</Scope>
            <Scope>perm:app:subscription:uninstall</Scope>
            <Scope>perm:admin:app:review:update</Scope>
            <Scope>perm:admin:app:review:view</Scope>
            <Scope>perm:admin:app:publisher:update</Scope>
            <Scope>perm:admin:app:review:update</Scope>
            <Scope>perm:admin:app:subscription:view</Scope>
            <Scope>perm:device-types:types</Scope>
            <Scope>perm:enterprise:modify</Scope>
            <Scope>perm:enterprise:view</Scope>
            <Scope>perm:android-work:customer</Scope>
            <Scope>perm:android-work:admin</Scope>
            <Scope>perm:application-command:modify</Scope>
            <Scope>perm:sign-csr</Scope>
            <Scope>perm:admin:devices:view</Scope>
            <Scope>perm:admin:topics:view</Scope>
            <Scope>perm:roles:add</Scope>
            <Scope>perm:roles:add-users</Scope>
            <Scope>perm:roles:update</Scope>
            <Scope>perm:roles:permissions</Scope>
            <Scope>perm:roles:details</Scope>
            <Scope>perm:roles:view</Scope>
            <Scope>perm:roles:create-combined-role</Scope>
            <Scope>perm:roles:delete</Scope>
            <Scope>perm:dashboard:vulnerabilities</Scope>
            <Scope>perm:dashboard:non-compliant-count</Scope>
            <Scope>perm:dashboard:non-compliant</Scope>
            <Scope>perm:dashboard:by-groups</Scope>
            <Scope>perm:dashboard:device-counts</Scope>
            <Scope>perm:dashboard:feature-non-compliant</Scope>
            <Scope>perm:dashboard:count-overview</Scope>
            <Scope>perm:dashboard:filtered-count</Scope>
            <Scope>perm:dashboard:details</Scope>
            <Scope>perm:get-activity</Scope>
            <Scope>perm:devices:delete</Scope>
            <Scope>perm:devices:applications</Scope>
            <Scope>perm:devices:effective-policy</Scope>
            <Scope>perm:devices:compliance-data</Scope>
            <Scope>perm:devices:features</Scope>
            <Scope>perm:devices:operations</Scope>
            <Scope>perm:devices:search</Scope>
            <Scope>perm:devices:details</Scope>
            <Scope>perm:devices:update</Scope>
            <Scope>perm:devices:view</Scope>
            <Scope>perm:view-configuration</Scope>
            <Scope>perm:manage-configuration</Scope>
            <Scope>perm:policies:remove</Scope>
            <Scope>perm:policies:priorities</Scope>
            <Scope>perm:policies:deactivate</Scope>
            <Scope>perm:policies:get-policy-details</Scope>
            <Scope>perm:policies:manage</Scope>
            <Scope>perm:policies:activate</Scope>
            <Scope>perm:policies:update</Scope>
            <Scope>perm:policies:changes</Scope>
            <Scope>perm:policies:get-details</Scope>
            <Scope>perm:users:add</Scope>
            <Scope>perm:users:details</Scope>
            <Scope>perm:users:count</Scope>
            <Scope>perm:users:delete</Scope>
            <Scope>perm:users:roles</Scope>
            <Scope>perm:users:user-details</Scope>
            <Scope>perm:users:credentials</Scope>
            <Scope>perm:users:search</Scope>
            <Scope>perm:users:is-exist</Scope>
            <Scope>perm:users:update</Scope>
            <Scope>perm:users:send-invitation</Scope>
            <Scope>perm:admin-users:view</Scope>
            <Scope>perm:admin:devices:update-enrollment</Scope>
            <Scope>perm:groups:devices</Scope>
            <Scope>perm:groups:update</Scope>
            <Scope>perm:groups:add</Scope>
            <Scope>perm:groups:device</Scope>
            <Scope>perm:groups:devices-count</Scope>
            <Scope>perm:groups:remove</Scope>
            <Scope>perm:groups:groups</Scope>
            <Scope>perm:groups:groups-view</Scope>
            <Scope>perm:groups:share</Scope>
            <Scope>perm:groups:count</Scope>
            <Scope>perm:groups:roles</Scope>
            <Scope>perm:groups:devices-remove</Scope>
            <Scope>perm:groups:devices-add</Scope>
            <Scope>perm:groups:assign</Scope>
            <Scope>perm:device-types:configs</Scope>
            <Scope>perm:device-types:features</Scope>
            <Scope>perm:device-types:types</Scope>
            <Scope>perm:applications:install</Scope>
            <Scope>perm:applications:uninstall</Scope>
            <Scope>perm:admin-groups:count</Scope>
            <Scope>perm:admin-groups:view</Scope>
            <Scope>perm:notifications:mark-checked</Scope>
            <Scope>perm:notifications:view</Scope>
            <Scope>perm:admin:certificates:delete</Scope>
            <Scope>perm:admin:certificates:details</Scope>
            <Scope>perm:admin:certificates:view</Scope>
            <Scope>perm:admin:certificates:add</Scope>
            <Scope>perm:admin:certificates:verify</Scope>
            <Scope>perm:admin</Scope>
            <Scope>perm:devicetype:deployment</Scope>
            <Scope>perm:device-types:events</Scope>
            <Scope>perm:device-types:events:view</Scope>
            <Scope>perm:admin:device-type</Scope>
            <Scope>perm:admin:device-type:view</Scope>
            <Scope>perm:admin:device-type:configs</Scope>
            <Scope>perm:device:enroll</Scope>
            <Scope>perm:geo-service:analytics-view</Scope>
            <Scope>perm:geo-service:alerts-manage</Scope>
            <Scope>appm:read</Scope>
	    <Scope>perm:devices:permanent-delete</Scope>
        </Scopes>
        <SSOConfiguration>
            <Issuer>app-mgt</Issuer>
        </SSOConfiguration>
        <ErrorCallback>
            <BadRequest>/pages/error/client-errors/400</BadRequest>
            <Unauthorized>/pages/error/client-errors/401</Unauthorized>
            <Forbidden>/pages/error/client-errors/403</Forbidden>
            <NotFound>/pages/error/client-errors/404</NotFound>
            <MethodNotAllowed>/pages/error/client-errors/405</MethodNotAllowed>
            <NotAcceptable>/pages/error/client-errors/406</NotAcceptable>
            <UnsupportedMediaType>/pages/error/client-errors/415</UnsupportedMediaType>
            <InternalServerError>/pages/error/server-errors/500</InternalServerError>
            <DefaultPage>/pages/error/default</DefaultPage>
        </ErrorCallback>
    </UIConfigs>

    <AppCategories>
        <Category>EMM</Category>
        <Category>IoT</Category>
        <Category>Art &amp; Design</Category>
        <Category>Auto &amp; Vehicles</Category>
        <Category>Beauty</Category>
        <Category>Books &amp; Reference</Category>
        <Category>Business</Category>
        <Category>Comics</Category>
        <Category>Communications</Category>
        <Category>Dating</Category>
        <Category>Education</Category>
        <Category>Entertainment</Category>
        <Category>Events</Category>
        <Category>Finance</Category>
        <Category>Food &amp; Drink</Category>
        <Category>Health &amp; Fitness</Category>
        <Category>House &amp; Home</Category>
        <Category>Libraries &amp; Demo</Category>
        <Category>Lifestyle</Category>
        <Category>Maps &amp; Navigation</Category>
        <Category>Medical</Category>
        <Category>Music &amp; Audio</Category>
        <Category>News &amp; Magazines</Category>
        <Category>Parenting</Category>
        <Category>Personalization</Category>
        <Category>Photography</Category>
        <Category>Productivity</Category>
        <Category>Shopping</Category>
        <Category>Social</Category>
        <Category>Sports</Category>
        <Category>Tools</Category>
        <Category>Travel &amp; Local</Category>
        <Category>Video Players &amp; Editors</Category>
        <Category>Weather</Category>
        <Category>GooglePlaySyncedApp</Category>
    </AppCategories>

    <RatingConfig>
        <MinRatingValue>1</MinRatingValue>
        <MaxRatingValue>10</MaxRatingValue>
    </RatingConfig>

    <MDMConfig>
        <ArtifactDownloadProtocol>http</ArtifactDownloadProtocol>
        <ArtifactDownloadEndpoint>/api/application-mgt/v1.0/artifact</ArtifactDownloadEndpoint>
    </MDMConfig>
</ApplicationManagementConfiguration>
